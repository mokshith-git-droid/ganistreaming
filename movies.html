<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Library - GANI HUB</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="back-btn" onclick="goHome()">‚Üê Back to Dashboard</button>

    <div class="container">
        <h1>üé¨ Movie Library</h1>
        
        <div class="movie-grid" id="moviesContainer">
            <!-- Movies will be loaded here -->
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="playerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePlayer()">&times;</span>
            <h2 id="playerTitle">Movie Title</h2>
            <p id="playerDescription">Movie description</p>
            <div id="videoContainer"></div>
        </div>
    </div>

    <script>
        async function loadMovies() {
            try {
                const response = await fetch('../manager.json');
                const data = await response.json();
                displayMovies(data.movies);
            } catch (error) {
                document.getElementById('moviesContainer').innerHTML = 
                    '<p class="error">Error loading movies. Check manager.json file.</p>';
            }
        }

        function displayMovies(movies) {
            const container = document.getElementById('moviesContainer');
            container.innerHTML = movies.map(movie => `
                <div class="movie-card" onclick="playMovie(${movie.id})">
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <h3 class="movie-title">${movie.title}</h3>
                        <p class="movie-genre">${movie.genre}</p>
                        <p class="movie-desc">${movie.description}</p>
                    </div>
                </div>
            `).join('');
        }

        function playMovie(movieId) {
            // This would fetch the specific movie and show in modal
            const modal = document.getElementById('playerModal');
            const videoContainer = document.getElementById('videoContainer');
            
            // For demo, using sample embed
            videoContainer.innerHTML = `
                <iframe src="https://archive.org/embed/sample-movie" 
                        width="800" height="450" 
                        frameborder="0" 
                        webkitallowfullscreen="true" 
                        mozallowfullscreen="true" 
                        allowfullscreen>
                </iframe>
            `;
            
            modal.style.display = 'block';
        }

        function closePlayer() {
            document.getElementById('playerModal').style.display = 'none';
        }

        function goHome() {
            window.location.href = "../home.html";
        }

        // Load movies when page opens
        loadMovies();

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('playerModal');
            if (event.target === modal) {
                closePlayer();
            }
        }
    </script>
</body>
</html>